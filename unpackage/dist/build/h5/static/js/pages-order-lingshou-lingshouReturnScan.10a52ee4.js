(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-lingshou-lingshouReturnScan"],{"022c":function(t,e,n){"use strict";var i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("ac6a"),n("96cf");var a=i(n("3b8d")),s=i(n("f499")),o=i(n("75fc")),c=n("6cad"),l=n("3c70"),r=n("ab72"),u={data:function(){return{formItem:{num:0,scan:"",BuyName:""},scanData:[]}},components:{},onLoad:function(){var t=this;uni.getStorage({key:"lingshouReturnScanData",success:function(e){var n,i=JSON.parse(e.data);(n=t.scanData).push.apply(n,(0,o.default)(i))}}),window.addEventListener("keydown",this.getKey)},computed:{},methods:{getKey:function(t){console.log(t.keyCode),13==t.keyCode&&this.sureBtn()},sureScan:function(){(0,c.scanCode)(this.getCode)},getCode:function(t){var e=this;if(this.scanData.length>0)for(var n in this.scanData)if(this.scanData[n].GoodsCode==t)return(0,r.pullToast)("该条码已被扫码！"),e.formItem.scan="",!1;this.scanData.unshift({GoodsCode:t,scan_time:(0,l.getCurrentDate)(2)}),this.formItem.num=this.scanData.length,uni.setStorage({key:"lingshouReturnScanData",data:(0,s.default)(this.scanData)})},sureBtn:function(){var t=(0,a.default)(regeneratorRuntime.mark(function t(){var e,n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,e.formItem.scan&&""!=e.formItem.scan){t.next=4;break}return(0,r.pullToast)("条码不能为空！"),t.abrupt("return",!1);case 4:if(!(e.scanData.length>0)){t.next=14;break}t.t0=regeneratorRuntime.keys(e.scanData);case 6:if((t.t1=t.t0()).done){t.next=14;break}if(n=t.t1.value,e.scanData[n].GoodsCode!=e.formItem.scan){t.next=12;break}return(0,r.pullToast)("该条码已被扫码！"),e.formItem.scan="",t.abrupt("return",!1);case 12:t.next=6;break;case 14:if(e.formItem.BuyName&&""!=e.formItem.BuyName){t.next=17;break}return(0,r.pullToast)("请输入退货人姓名！",1500,"warning"),t.abrupt("return",!1);case 17:return t.next=19,e.$http.ReqPOST("User/CheckScanCodeForRetailReturn",{ScanCode:e.formItem.scan,BuyName:e.formItem.BuyName});case 19:i=t.sent,e.scanData.unshift({GoodsCode:i.data,scan_time:(0,l.getCurrentDate)(2)}),e.formItem.num=e.scanData.length,e.formItem.scan="",uni.setStorage({key:"lingshouReturnScanData",data:(0,s.default)(e.scanData)});case 24:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),delScan:function(t){this.scanData.splice(t,1),this.formItem.num=this.scanData.length,uni.setStorage({key:"lingshouReturnScanData",data:(0,s.default)(this.scanData)})},submit:function(){var t=(0,a.default)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.scanData.length){t.next=3;break}return(0,r.pullToast)("条码不能为空！"),t.abrupt("return",!1);case 3:if(this.formItem.BuyName&&""!=this.formItem.BuyName){t.next=6;break}return(0,r.pullToast)("请输入退货人姓名！"),t.abrupt("return",!1);case 6:return t.next=8,this.$http.ReqPOST("User/InsertGoodsByScanCodeByRetailReturn",{BuyName:this.formItem.BuyName,scanCodeJson:(0,s.default)(this.scanData)});case 8:t.sent,(0,r.pullToast)("操作成功"),this.clear();case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),clear:function(){this.scanData=[],this.formItem.num=0,this.formItem.scan="",this.formItem.BuyName="",uni.removeStorage({key:"lingshouReturnScanData"})}}};e.default=u},"55dda":function(t,e,n){"use strict";var i=n("73d9"),a=n.n(i);a.a},"63b8":function(t,e,n){"use strict";n.r(e);var i=n("b1cc"),a=n("7d0a");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("55dda");var o=n("2877"),c=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,"694f4f07",null);e["default"]=c.exports},"73d9":function(t,e,n){var i=n("8f0a");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("14ec83f9",i,!0,{sourceMap:!1,shadowMode:!1})},"7d0a":function(t,e,n){"use strict";n.r(e);var i=n("022c"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},"8f0a":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.cont[data-v-694f4f07]{width:100%;padding:%?30?%;-webkit-box-sizing:border-box;box-sizing:border-box}.cont .cont-scan[data-v-694f4f07]{padding-top:%?100?%}.cont .cont-scan uni-view[data-v-694f4f07]{position:relative;margin:0 auto;-webkit-box-sizing:border-box;box-sizing:border-box;width:%?300?%;height:%?300?%;line-height:%?300?%;border:%?10?% solid #df8d15;text-align:center;color:#df8d15;font-size:%?40?%}.cont .cont-scan uni-view uni-text[data-v-694f4f07]{position:relative;z-index:999}.cont .cont-scan uni-view[data-v-694f4f07]:before{content:"";display:block;position:absolute;width:%?300?%;height:%?100?%;background:#fff;left:%?-10?%;top:%?90?%}.cont .cont-scan uni-view[data-v-694f4f07]:after{content:"";display:block;position:absolute;height:%?300?%;width:%?100?%;background:#fff;top:%?-10?%;left:%?90?%}.cont .cont-list .list-lis[data-v-694f4f07]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;height:%?60?%;line-height:%?60?%;font-size:%?28?%}.cont .cont-list .list-lis uni-input[data-v-694f4f07]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;height:%?60?%;line-height:%?60?%;font-size:%?28?%}.cont .cont-list .list-lis uni-button[data-v-694f4f07]{height:%?60?%;line-height:%?60?%;font-size:%?28?%;background:#009788;color:#fff}.cont .cont-list .list-tlis[data-v-694f4f07]{border:1px solid #e8eaec;margin-top:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.cont .cont-list .list-tlis .tlis-li[data-v-694f4f07]{border-bottom:1px solid #e8eaec;-webkit-box-sizing:border-box;box-sizing:border-box}.cont .cont-list .list-tlis .tlis-li[data-v-694f4f07]:after{content:"";display:block;clear:both}.cont .cont-list .list-tlis .tlis-li[data-v-694f4f07]:first-child{padding:%?20?% 0}.cont .cont-list .list-tlis .tlis-li .li-tc[data-v-694f4f07]{float:left;text-align:center;font-size:%?26?%;padding:0 %?10?%;-webkit-box-sizing:border-box;box-sizing:border-box;color:#606266;word-break:break-all}.cont .cont-list .list-tlis .tlis-li .li-tc[data-v-694f4f07]:first-child{width:42.5%}.cont .cont-list .list-tlis .tlis-li .li-tc[data-v-694f4f07]:nth-child(2){width:42.5%}.cont .cont-list .list-tlis .tlis-li .li-tc[data-v-694f4f07]:nth-child(3){width:15%}.cont .cont-list .list-tlis .tlis-li>uni-view[data-v-694f4f07]{padding:%?20?% 0;border-bottom:1px solid #e8eaec;text-align:center;font-size:%?28?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.cont .cont-list .list-tlis .tlis-li>uni-view[data-v-694f4f07]:after{content:"";display:block;clear:both}.cont .cont-list .list-tlis .tlis-li>uni-view>uni-text[data-v-694f4f07]{vertical-align:middle}.cont .cont-list .list-tlis .tlis-li>uni-view.li-tf[data-v-694f4f07]{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.cont .cont-list .list-tlis .tlis-li>uni-view[data-v-694f4f07]:last-child{border-bottom:none}.cont .cont-foot .foot-btn[data-v-694f4f07]{background:#009788;height:%?80?%;line-height:%?80?%;color:#fff;border:none;margin-top:%?40?%;-webkit-box-sizing:border-box;box-sizing:border-box}.cont .cont-foot .foot-btn[data-v-694f4f07]:last-child{background:#fff;color:#101010;border:1px solid #009788}',""])},b1cc:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"cont"},[n("v-uni-view",{staticClass:"cont-scan"},[n("v-uni-view",{on:{click:function(e){e=t.$handleEvent(e),t.sureScan(e)}}},[n("v-uni-text",[t._v("点击扫码")])],1)],1),n("v-uni-view",{staticClass:"cont-list"},[n("v-uni-view",{staticClass:"list-lis"},[n("v-uni-text",[t._v("总行数：")]),n("v-uni-input",{attrs:{type:"text",value:t.formItem.num,placeholder:"0",disabled:""}})],1),n("v-uni-view",{staticClass:"list-lis"},[n("v-uni-text",[t._v("输入条码：")]),n("v-uni-input",{attrs:{type:"text",placeholder:"请扫码或输入条码"},model:{value:t.formItem.scan,callback:function(e){t.$set(t.formItem,"scan",e)},expression:"formItem.scan"}}),n("v-uni-button",{staticClass:"lis-btn",on:{click:function(e){e=t.$handleEvent(e),t.sureBtn(e)}}},[t._v("确认")])],1),n("v-uni-view",{staticClass:"list-lis"},[n("v-uni-text",[t._v("购买人姓名：")]),n("v-uni-input",{attrs:{type:"text",placeholder:"请输入购买人姓名"},model:{value:t.formItem.BuyName,callback:function(e){t.$set(t.formItem,"BuyName",e)},expression:"formItem.BuyName"}})],1),n("v-uni-view",{staticClass:"list-tlis"},[n("v-uni-view",{staticClass:"tlis-li"},[n("v-uni-text",{staticClass:"li-tc"},[t._v("条码")]),n("v-uni-text",{staticClass:"li-tc"},[t._v("扫码时间")]),n("v-uni-text",{staticClass:"li-tc"},[t._v("操作")])],1),t.scanData.length>0?n("v-uni-view",{staticClass:"tlis-li"},t._l(t.scanData,function(e,i){return n("v-uni-view",{key:i},[n("v-uni-text",{staticClass:"li-tc"},[t._v(t._s(e.GoodsCode))]),n("v-uni-text",{staticClass:"li-tc"},[t._v(t._s(e.scan_time))]),n("v-uni-text",{staticClass:"li-tc",on:{click:function(e){e=t.$handleEvent(e),t.delScan(i)}}},[t._v("删除")])],1)}),1):n("v-uni-view",{staticClass:"tlis-li"},[n("v-uni-view",{staticClass:"li-tf"},[n("v-uni-text",[t._v("暂无数据")])],1)],1)],1)],1),n("v-uni-view",{staticClass:"cont-foot"},[n("v-uni-button",{staticClass:"foot-btn ",on:{click:function(e){e=t.$handleEvent(e),t.submit(e)}}},[t._v("提交")]),n("v-uni-button",{staticClass:"foot-btn ",on:{click:function(e){e=t.$handleEvent(e),t.clear(e)}}},[t._v("清除")])],1)],1)],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})}}]);